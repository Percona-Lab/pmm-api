syntax = "proto3";

package inventory;

import "google/api/annotations.proto";

// enum AgentType {
//   AGENT_TYPE_INVALID = 0;
//   MYSQLD_EXPORTER = 1;
//   RDS_EXPORTER = 2;
// }

// message Agent {
//   uint32 id = 1;
//   AgentType type = 2;
//   uint32 runs_on_node_id = 3;
// }

message MySQLdExporter {
  // Unique agent identifier.
  uint32 id = 1;
  // Node identifier where agent runs.
  uint32 runs_on_node_id = 2;
  // MySQL username for extracting metrics.
  string username = 3;
  // MySQL password for extracting metrics.
  string password = 4;
  // HTTP listen port for exposing metrics.
  uint32 listen_port = 5;
}

message AddMySQLdExporterRequest {
  // Node identifier where agent should run.
  uint32 runs_on_node_id = 1;
  // MySQL username for extracting metrics.
  string username = 2;
  // MySQL password for extracting metrics.
  string password = 3;
}

message AddMySQLdExporterResponse {
  MySQLdExporter agent = 1;
}

// message RemoveMySQLdExporterRequest {
//   uint32 id = 1;
// }

// message RemoveMySQLdExporterResponse {}

service Agents {
  // Add mysqld_exporter agent.
  rpc AddMySQLdExporter(AddMySQLdExporterRequest) returns (AddMySQLdExporterResponse) {
    option (google.api.http) = {
      post: "/v0/inventory/Agents/AddMySQLdExporter"
      body: "*"
    };
  }
  // rpc RemoveMySQLdExporter(RemoveMySQLdExporterRequest) returns (RemoveMySQLdExporterResponse) {
  //   option (google.api.http) = {
  //     post: "/v0/inventory/Agents/RemoveMySQLdExporter"
  //     body: "*"
  //   };
  // }

}
